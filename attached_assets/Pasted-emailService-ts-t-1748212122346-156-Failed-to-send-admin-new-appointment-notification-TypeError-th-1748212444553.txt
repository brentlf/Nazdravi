emailService.ts?t=1748212122346:156 Failed to send admin new appointment notification: TypeError: this.sendEmail is not a function
    at EmailService.sendAdminNewAppointment (emailService.ts?t=1748212122346:135:18)
    at handleTestAdminNewAppointment (AdminEmailScheduler.tsx:290:26)
    at HTMLUnknownElement.callCallback2 (chunk-RPCDYKBN.js?v=1a8e8de5:3674:22)
    at Object.invokeGuardedCallbackDev (chunk-RPCDYKBN.js?v=1a8e8de5:3699:24)
    at invokeGuardedCallback (chunk-RPCDYKBN.js?v=1a8e8de5:3733:39)
    at invokeGuardedCallbackAndCatchFirstError (chunk-RPCDYKBN.js?v=1a8e8de5:3736:33)
    at executeDispatch (chunk-RPCDYKBN.js?v=1a8e8de5:7014:11)
    at processDispatchQueueItemsInOrder (chunk-RPCDYKBN.js?v=1a8e8de5:7034:15)
    at processDispatchQueue (chunk-RPCDYKBN.js?v=1a8e8de5:7043:13)
    at dispatchEventsForPlugins (chunk-RPCDYKBN.js?v=1a8e8de5:7051:11)
overrideMethod @ hook.js:608
sendAdminNewAppointment @ emailService.ts?t=1748212122346:156
handleTestAdminNewAppointment @ AdminEmailScheduler.tsx:290
callCallback2 @ chunk-RPCDYKBN.js?v=1a8e8de5:3674
invokeGuardedCallbackDev @ chunk-RPCDYKBN.js?v=1a8e8de5:3699
invokeGuardedCallback @ chunk-RPCDYKBN.js?v=1a8e8de5:3733
invokeGuardedCallbackAndCatchFirstError @ chunk-RPCDYKBN.js?v=1a8e8de5:3736
executeDispatch @ chunk-RPCDYKBN.js?v=1a8e8de5:7014
processDispatchQueueItemsInOrder @ chunk-RPCDYKBN.js?v=1a8e8de5:7034
processDispatchQueue @ chunk-RPCDYKBN.js?v=1a8e8de5:7043
dispatchEventsForPlugins @ chunk-RPCDYKBN.js?v=1a8e8de5:7051
(anonymous) @ chunk-RPCDYKBN.js?v=1a8e8de5:7174
batchedUpdates$1 @ chunk-RPCDYKBN.js?v=1a8e8de5:18913
batchedUpdates @ chunk-RPCDYKBN.js?v=1a8e8de5:3579
dispatchEventForPluginEventSystem @ chunk-RPCDYKBN.js?v=1a8e8de5:7173
dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay @ chunk-RPCDYKBN.js?v=1a8e8de5:5478
dispatchEvent @ chunk-RPCDYKBN.js?v=1a8e8de5:5472
dispatchDiscreteEvent @ chunk-RPCDYKBN.js?v=1a8e8de5:5449
emailService.ts?t=1748212122346:167 Admin health update notification sent successfully
emailService.ts?t=1748212122346:181 Admin payment received notification sent successfully
queryClient.ts:15 
            
            
           POST https://e394ccd4-b3dd-43ba-8feb-deda267050d2-00-3v6n3vit95c2j.spock.replit.dev/api/emails/appointment-confirmation 500 (Internal Server Error)
apiRequest @ queryClient.ts:15
sendAdminNewAppointment @ emailService.ts?t=1748212225061:135
handleTestAdminNewAppointment @ AdminEmailScheduler.tsx:290
callCallback2 @ chunk-RPCDYKBN.js?v=1a8e8de5:3674
invokeGuardedCallbackDev @ chunk-RPCDYKBN.js?v=1a8e8de5:3699
invokeGuardedCallback @ chunk-RPCDYKBN.js?v=1a8e8de5:3733
invokeGuardedCallbackAndCatchFirstError @ chunk-RPCDYKBN.js?v=1a8e8de5:3736
executeDispatch @ chunk-RPCDYKBN.js?v=1a8e8de5:7014
processDispatchQueueItemsInOrder @ chunk-RPCDYKBN.js?v=1a8e8de5:7034
processDispatchQueue @ chunk-RPCDYKBN.js?v=1a8e8de5:7043
dispatchEventsForPlugins @ chunk-RPCDYKBN.js?v=1a8e8de5:7051
(anonymous) @ chunk-RPCDYKBN.js?v=1a8e8de5:7174
batchedUpdates$1 @ chunk-RPCDYKBN.js?v=1a8e8de5:18913
batchedUpdates @ chunk-RPCDYKBN.js?v=1a8e8de5:3579
dispatchEventForPluginEventSystem @ chunk-RPCDYKBN.js?v=1a8e8de5:7173
dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay @ chunk-RPCDYKBN.js?v=1a8e8de5:5478
dispatchEvent @ chunk-RPCDYKBN.js?v=1a8e8de5:5472
dispatchDiscreteEvent @ chunk-RPCDYKBN.js?v=1a8e8de5:5449
emailService.ts?t=1748212225061:145 Failed to send admin new appointment notification: Error: 500: {"success":false,"error":"Value for argument \"data\" is not a valid Firestore document. Cannot use \"undefined\" as a Firestore value (found in field \"data.meetingUrl\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`."}
    at throwIfResNotOk (queryClient.ts:6:11)
    at async apiRequest (queryClient.ts:22:3)
    at async EmailService.sendAdminNewAppointment (emailService.ts?t=1748212225061:135:7)
    at async handleTestAdminNewAppointment (AdminEmailScheduler.tsx:290:7)
overrideMethod @ hook.js:608
sendAdminNewAppointment @ emailService.ts?t=1748212225061:145
await in sendAdminNewAppointment
handleTestAdminNewAppointment @ AdminEmailScheduler.tsx:290
callCallback2 @ chunk-RPCDYKBN.js?v=1a8e8de5:3674
invokeGuardedCallbackDev @ chunk-RPCDYKBN.js?v=1a8e8de5:3699
invokeGuardedCallback @ chunk-RPCDYKBN.js?v=1a8e8de5:3733
invokeGuardedCallbackAndCatchFirstError @ chunk-RPCDYKBN.js?v=1a8e8de5:3736
executeDispatch @ chunk-RPCDYKBN.js?v=1a8e8de5:7014
processDispatchQueueItemsInOrder @ chunk-RPCDYKBN.js?v=1a8e8de5:7034
processDispatchQueue @ chunk-RPCDYKBN.js?v=1a8e8de5:7043
dispatchEventsForPlugins @ chunk-RPCDYKBN.js?v=1a8e8de5:7051
(anonymous) @ chunk-RPCDYKBN.js?v=1a8e8de5:7174
batchedUpdates$1 @ chunk-RPCDYKBN.js?v=1a8e8de5:18913
batchedUpdates @ chunk-RPCDYKBN.js?v=1a8e8de5:3579
dispatchEventForPluginEventSystem @ chunk-RPCDYKBN.js?v=1a8e8de5:7173
dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay @ chunk-RPCDYKBN.js?v=1a8e8de5:5478
dispatchEvent @ chunk-RPCDYKBN.js?v=1a8e8de5:5472
dispatchDiscreteEvent @ chunk-RPCDYKBN.js?v=1a8e8de5:5449
emailService.ts?t=1748212225061:156 Admin health update notification sent successfully
emailService.ts?t=1748212225061:170 Admin payment received notification sent successfully
emailService.ts?t=1748212336922:144 Admin new appointment notification sent successfully
queryClient.ts:15 
            
            
           POST https://e394ccd4-b3dd-43ba-8feb-deda267050d2-00-3v6n3vit95c2j.spock.replit.dev/api/emails/appointment-reminder 500 (Internal Server Error)
apiRequest @ queryClient.ts:15
sendAppointmentReminder @ emailService.ts?t=1748212336922:39
handleTestReminderEmail @ AdminEmailScheduler.tsx:108
callCallback2 @ chunk-RPCDYKBN.js?v=1a8e8de5:3674
invokeGuardedCallbackDev @ chunk-RPCDYKBN.js?v=1a8e8de5:3699
invokeGuardedCallback @ chunk-RPCDYKBN.js?v=1a8e8de5:3733
invokeGuardedCallbackAndCatchFirstError @ chunk-RPCDYKBN.js?v=1a8e8de5:3736
executeDispatch @ chunk-RPCDYKBN.js?v=1a8e8de5:7014
processDispatchQueueItemsInOrder @ chunk-RPCDYKBN.js?v=1a8e8de5:7034
processDispatchQueue @ chunk-RPCDYKBN.js?v=1a8e8de5:7043
dispatchEventsForPlugins @ chunk-RPCDYKBN.js?v=1a8e8de5:7051
(anonymous) @ chunk-RPCDYKBN.js?v=1a8e8de5:7174
batchedUpdates$1 @ chunk-RPCDYKBN.js?v=1a8e8de5:18913
batchedUpdates @ chunk-RPCDYKBN.js?v=1a8e8de5:3579
dispatchEventForPluginEventSystem @ chunk-RPCDYKBN.js?v=1a8e8de5:7173
dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay @ chunk-RPCDYKBN.js?v=1a8e8de5:5478
dispatchEvent @ chunk-RPCDYKBN.js?v=1a8e8de5:5472
dispatchDiscreteEvent @ chunk-RPCDYKBN.js?v=1a8e8de5:5449
emailService.ts?t=1748212336922:42 Failed to send appointment reminder email: Error: 500: {"success":false,"error":"Value for argument \"data\" is not a valid Firestore document. Cannot use \"undefined\" as a Firestore value (found in field \"data.meetingUrl\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`."}
    at throwIfResNotOk (queryClient.ts:6:11)
    at async apiRequest (queryClient.ts:22:3)
    at async EmailService.sendAppointmentReminder (emailService.ts?t=1748212336922:39:7)
    at async handleTestReminderEmail (AdminEmailScheduler.tsx:108:7)
overrideMethod @ hook.js:608
sendAppointmentReminder @ emailService.ts?t=1748212336922:42
await in sendAppointmentReminder
handleTestReminderEmail @ AdminEmailScheduler.tsx:108
callCallback2 @ chunk-RPCDYKBN.js?v=1a8e8de5:3674
invokeGuardedCallbackDev @ chunk-RPCDYKBN.js?v=1a8e8de5:3699
invokeGuardedCallback @ chunk-RPCDYKBN.js?v=1a8e8de5:3733
invokeGuardedCallbackAndCatchFirstError @ chunk-RPCDYKBN.js?v=1a8e8de5:3736
executeDispatch @ chunk-RPCDYKBN.js?v=1a8e8de5:7014
processDispatchQueueItemsInOrder @ chunk-RPCDYKBN.js?v=1a8e8de5:7034
processDispatchQueue @ chunk-RPCDYKBN.js?v=1a8e8de5:7043
dispatchEventsForPlugins @ chunk-RPCDYKBN.js?v=1a8e8de5:7051
(anonymous) @ chunk-RPCDYKBN.js?v=1a8e8de5:7174
batchedUpdates$1 @ chunk-RPCDYKBN.js?v=1a8e8de5:18913
batchedUpdates @ chunk-RPCDYKBN.js?v=1a8e8de5:3579
dispatchEventForPluginEventSystem @ chunk-RPCDYKBN.js?v=1a8e8de5:7173
dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay @ chunk-RPCDYKBN.js?v=1a8e8de5:5478
dispatchEvent @ chunk-RPCDYKBN.js?v=1a8e8de5:5472
dispatchDiscreteEvent @ chunk-RPCDYKBN.js?v=1a8e8de5:5449
emailService.ts?t=1748212336922:6 Welcome email sent successfully
queryClient.ts:15 
            
            
           POST https://e394ccd4-b3dd-43ba-8feb-deda267050d2-00-3v6n3vit95c2j.spock.replit.dev/api/emails/appointment-confirmation 500 (Internal Server Error)
apiRequest @ queryClient.ts:15
sendAppointmentConfirmation @ emailService.ts?t=1748212336922:14
handleTestConfirmationEmail @ AdminEmailScheduler.tsx:82
callCallback2 @ chunk-RPCDYKBN.js?v=1a8e8de5:3674
invokeGuardedCallbackDev @ chunk-RPCDYKBN.js?v=1a8e8de5:3699
invokeGuardedCallback @ chunk-RPCDYKBN.js?v=1a8e8de5:3733
invokeGuardedCallbackAndCatchFirstError @ chunk-RPCDYKBN.js?v=1a8e8de5:3736
executeDispatch @ chunk-RPCDYKBN.js?v=1a8e8de5:7014
processDispatchQueueItemsInOrder @ chunk-RPCDYKBN.js?v=1a8e8de5:7034
processDispatchQueue @ chunk-RPCDYKBN.js?v=1a8e8de5:7043
dispatchEventsForPlugins @ chunk-RPCDYKBN.js?v=1a8e8de5:7051
(anonymous) @ chunk-RPCDYKBN.js?v=1a8e8de5:7174
batchedUpdates$1 @ chunk-RPCDYKBN.js?v=1a8e8de5:18913
batchedUpdates @ chunk-RPCDYKBN.js?v=1a8e8de5:3579
dispatchEventForPluginEventSystem @ chunk-RPCDYKBN.js?v=1a8e8de5:7173
dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay @ chunk-RPCDYKBN.js?v=1a8e8de5:5478
dispatchEvent @ chunk-RPCDYKBN.js?v=1a8e8de5:5472
dispatchDiscreteEvent @ chunk-RPCDYKBN.js?v=1a8e8de5:5449
emailService.ts?t=1748212336922:17 Failed to send appointment confirmation email: Error: 500: {"success":false,"error":"Value for argument \"data\" is not a valid Firestore document. Cannot use \"undefined\" as a Firestore value (found in field \"data.meetingUrl\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`."}
    at throwIfResNotOk (queryClient.ts:6:11)
    at async apiRequest (queryClient.ts:22:3)
    at async EmailService.sendAppointmentConfirmation (emailService.ts?t=1748212336922:14:7)
    at async handleTestConfirmationEmail (AdminEmailScheduler.tsx:82:7)
overrideMethod @ hook.js:608
sendAppointmentConfirmation @ emailService.ts?t=1748212336922:17
await in sendAppointmentConfirmation
handleTestConfirmationEmail @ AdminEmailScheduler.tsx:82
callCallback2 @ chunk-RPCDYKBN.js?v=1a8e8de5:3674
invokeGuardedCallbackDev @ chunk-RPCDYKBN.js?v=1a8e8de5:3699
invokeGuardedCallback @ chunk-RPCDYKBN.js?v=1a8e8de5:3733
invokeGuardedCallbackAndCatchFirstError @ chunk-RPCDYKBN.js?v=1a8e8de5:3736
executeDispatch @ chunk-RPCDYKBN.js?v=1a8e8de5:7014
processDispatchQueueItemsInOrder @ chunk-RPCDYKBN.js?v=1a8e8de5:7034
processDispatchQueue @ chunk-RPCDYKBN.js?v=1a8e8de5:7043
dispatchEventsForPlugins @ chunk-RPCDYKBN.js?v=1a8e8de5:7051
(anonymous) @ chunk-RPCDYKBN.js?v=1a8e8de5:7174
batchedUpdates$1 @ chunk-RPCDYKBN.js?v=1a8e8de5:18913
batchedUpdates @ chunk-RPCDYKBN.js?v=1a8e8de5:3579
dispatchEventForPluginEventSystem @ chunk-RPCDYKBN.js?v=1a8e8de5:7173
dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay @ chunk-RPCDYKBN.js?v=1a8e8de5:5478
dispatchEvent @ chunk-RPCDYKBN.js?v=1a8e8de5:5472
dispatchDiscreteEvent @ chunk-RPCDYKBN.js?v=1a8e8de5:5449
queryClient.ts:15 
            
            
           POST https://e394ccd4-b3dd-43ba-8feb-deda267050d2-00-3v6n3vit95c2j.spock.replit.dev/api/emails/appointment-reminder 500 (Internal Server Error)
apiRequest @ queryClient.ts:15
sendAppointmentReminder @ emailService.ts?t=1748212336922:39
handleTestReminderEmail @ AdminEmailScheduler.tsx:108
callCallback2 @ chunk-RPCDYKBN.js?v=1a8e8de5:3674
invokeGuardedCallbackDev @ chunk-RPCDYKBN.js?v=1a8e8de5:3699
invokeGuardedCallback @ chunk-RPCDYKBN.js?v=1a8e8de5:3733
invokeGuardedCallbackAndCatchFirstError @ chunk-RPCDYKBN.js?v=1a8e8de5:3736
executeDispatch @ chunk-RPCDYKBN.js?v=1a8e8de5:7014
processDispatchQueueItemsInOrder @ chunk-RPCDYKBN.js?v=1a8e8de5:7034
processDispatchQueue @ chunk-RPCDYKBN.js?v=1a8e8de5:7043
dispatchEventsForPlugins @ chunk-RPCDYKBN.js?v=1a8e8de5:7051
(anonymous) @ chunk-RPCDYKBN.js?v=1a8e8de5:7174
batchedUpdates$1 @ chunk-RPCDYKBN.js?v=1a8e8de5:18913
batchedUpdates @ chunk-RPCDYKBN.js?v=1a8e8de5:3579
dispatchEventForPluginEventSystem @ chunk-RPCDYKBN.js?v=1a8e8de5:7173
dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay @ chunk-RPCDYKBN.js?v=1a8e8de5:5478
dispatchEvent @ chunk-RPCDYKBN.js?v=1a8e8de5:5472
dispatchDiscreteEvent @ chunk-RPCDYKBN.js?v=1a8e8de5:5449
emailService.ts?t=1748212336922:42 Failed to send appointment reminder email: Error: 500: {"success":false,"error":"Value for argument \"data\" is not a valid Firestore document. Cannot use \"undefined\" as a Firestore value (found in field \"data.meetingUrl\"). If you want to ignore undefined values, enable `ignoreUndefinedProperties`."}
    at throwIfResNotOk (queryClient.ts:6:11)
    at async apiRequest (queryClient.ts:22:3)
    at async EmailService.sendAppointmentReminder (emailService.ts?t=1748212336922:39:7)
    at async handleTestReminderEmail (AdminEmailScheduler.tsx:108:7)
overrideMethod @ hook.js:608
sendAppointmentReminder @ emailService.ts?t=1748212336922:42
await in sendAppointmentReminder
handleTestReminderEmail @ AdminEmailScheduler.tsx:108
callCallback2 @ chunk-RPCDYKBN.js?v=1a8e8de5:3674
invokeGuardedCallbackDev @ chunk-RPCDYKBN.js?v=1a8e8de5:3699
invokeGuardedCallback @ chunk-RPCDYKBN.js?v=1a8e8de5:3733
invokeGuardedCallbackAndCatchFirstError @ chunk-RPCDYKBN.js?v=1a8e8de5:3736
executeDispatch @ chunk-RPCDYKBN.js?v=1a8e8de5:7014
processDispatchQueueItemsInOrder @ chunk-RPCDYKBN.js?v=1a8e8de5:7034
processDispatchQueue @ chunk-RPCDYKBN.js?v=1a8e8de5:7043
dispatchEventsForPlugins @ chunk-RPCDYKBN.js?v=1a8e8de5:7051
(anonymous) @ chunk-RPCDYKBN.js?v=1a8e8de5:7174
batchedUpdates$1 @ chunk-RPCDYKBN.js?v=1a8e8de5:18913
batchedUpdates @ chunk-RPCDYKBN.js?v=1a8e8de5:3579
dispatchEventForPluginEventSystem @ chunk-RPCDYKBN.js?v=1a8e8de5:7173
dispatchEventWithEnableCapturePhaseSelectiveHydrationWithoutDiscreteEventReplay @ chunk-RPCDYKBN.js?v=1a8e8de5:5478
dispatchEvent @ chunk-RPCDYKBN.js?v=1a8e8de5:5472
dispatchDiscreteEvent @ chunk-RPCDYKBN.js?v=1a8e8de5:5449
emailService.ts?t=1748212336922:31 Reschedule request email sent successfully
emailService.ts?t=1748212336922:90 Invoice generated email sent successfully
emailService.ts?t=1748212336922:108 Late reschedule notice email sent successfully
emailService.ts?t=1748212336922:126 Appointment cancelled email sent successfully
emailService.ts?t=1748212336922:117 No-show notice email sent successfully
emailService.ts:214 Admin new appointment notification sent successfully
emailService.ts:232 Admin health update notification sent successfully
emailService.ts:252 Admin payment received notification sent successfully
